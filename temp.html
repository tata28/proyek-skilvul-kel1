<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dropdown with Search and Table</title>
    <!-- Include jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Include Select2 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <!-- Include Select2 JS -->
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
</head>
<body>
    <div class="col-12 mt-4">
        <div class="form-group p-0">
            <div class="row">
                <div class="col-2 d-flex align-items-center ">
                    <p class="m-0">Pilih barang yang dibeli</p>
                </div>
                <div class="col-10">
                    <select class="form-select form-control" id="uid_tag" aria-label="Default select example" name="id_tag">
                        <option value="1" data-category="Category 1" data-price="100">Barang 1</option>
                        <option value="2" data-category="Category 2" data-price="200">Barang 2</option>
                        <option value="3" data-category="Category 3" data-price="300">Barang 3</option>
                        <option value="4" data-category="Category 4" data-price="400">Barang 4</option>
                        <option value="5" data-category="Category 5" data-price="500">Barang 5</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <table id="selectedItemsTable" class="table mt-4">
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Category</th>
                <th>Price</th>
            </tr>
        </thead>
        <tbody>
            <!-- Selected items will be added here -->
        </tbody>
    </table>

    <script>
    $(document).ready(function() {
        $('#uid_tag').select2({
            placeholder: 'Pilih barang yang dibeli',
            allowClear: true
        });
        
        $('#uid_tag').on('select2:select', function (e) {
            var selectedOption = $(e.params.data.element);
            var id = selectedOption.val();
            var name = selectedOption.text();
            var category = selectedOption.data('category');
            var price = selectedOption.data('price');
            
            addToTable(id, name, category, price);
        });

        function addToTable(id, name, category, price) {
            var table = $('#selectedItemsTable tbody');
            var row = `<tr>
                           <td>${id}</td>
                           <td>${name}</td>
                           <td>${category}</td>
                           <td>${price}</td>
                       </tr>`;
            table.append(row);
        }
    });
    </script>
</body>
</html>
